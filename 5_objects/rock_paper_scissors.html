<!DOCTYPE html>
<html>
<head>
  <title>Rock Paper Scissor</title>
</head>
<body>
  <p>
    Rock Paper Scissors
  </p>
  <button onclick="
    playGame('Rock');
  ">
    Rock
  </button>

  <button onclick="
    playGame('Paper');
  " >
      Paper
  </button>

  <button onclick="
    playGame('Scissor');
  ">
      Scissor
  </button>

  <button onclick="
  resetScore();
  "> 
    Reset Score
  </button>
  <script>
    //if page is reloaded , string stored in localStorage is fetched , 
    //thus score doesnt reset to 0 when reloaded
    //since the fetched data is string , we use .parse() to convert into object
    let score = JSON.parse(localStorage.getItem('score')) || {
        wins:0,
        losses:0,
        ties:0
      };
    //used default operator shortcut
    //if JSON.parse(localStorage.getItem('score')) -> falsy , the other value will be assigned to score

    console.log(score);

    function resetScore(){
      score.wins = 0;
      score.losses = 0;
      score.ties = 0;

      //deleting data from local storage
      localStorage.removeItem('score');

    alert(`Score Reset
Wins: ${score.wins}, Losses: ${score.losses}, Ties: ${score.ties}`);
    }

    //when data is deleted due to reset and page is reloaded, then "score" becomes null, so we reassign a new object to start where all values are 0 
    //score === null -> !score
    /*
    if(!score){
      score = {
        wins:0,
        losses:0,
        ties:0
      };
    }*/

    function playGame(userMove){

      //computer picks move
      function pickComputerMove(){

        let randomNumber=Math.random();
        let computerMove='';

        if(randomNumber>=0 && randomNumber<1/3){
          computerMove='Rock';
        }
        else if(randomNumber>=1/3 && randomNumber<2/3)
        {
          computerMove='Paper';
        }
        else if(randomNumber>=2/3 && randomNumber<1){
          computerMove='Scissor'
        }

        return computerMove;
      }

      //calculate result based on usermove
      const computerMove = pickComputerMove();
      let result='';
      if(userMove === 'Rock'){
        if(computerMove === 'Rock' ){
        result='Tie';
        }
        else if(computerMove === 'Paper'){
          result='You Lose';
        }
        else if (computerMove === 'Scissor'){
          result='You Win';
        }
      }

      if(userMove === 'Paper'){
        if(computerMove === 'Rock' ){
          result='You Win';
        }
        else if(computerMove === 'Paper'){
          result='Tie';
        }
        else if (computerMove === 'Scissor'){
          result='You Lose';
        }
      }
      if(userMove === 'Scissor'){
        if(computerMove === 'Rock'){
        result='You Lose';
        }
        else if(computerMove === 'Paper'){
          result='You Win';
        }
        else if (computerMove === 'Scissor'){
          result='Tie';
        }
      }

      //update score
      if(result === 'You Win'){
        score.wins += 1;
      }
      else if(result === 'You Lose'){
        score.losses += 1 ;
      }
      else if (result === 'Tie'){
        score.ties += 1;
      }

      //storing updated score in local storage
      //since localStorage stores only strings , we use JSON.stringify()
      localStorage.setItem('score',JSON.stringify(score));

      alert(`You Picked ${userMove}, Computer picked ${computerMove}, ${result}
Wins: ${score.wins}, Losses: ${score.losses}, Ties: ${score.ties}`);

        }

  </script>
</body>
</html>